#include <stdio.h>
#include <stdlib.h>
#include <winsock2.h>

#pragma comment(lib, "ws2_32.lib") 

#define PORT 6600
#define BUFF_SIZE 20	//메시지의 크기
	


void start(void);	//프로그램을 시작
void server(void);	//서버 동작
void client(void);      //클라이언 동작   
void init_game(void);				//게임을 초기화
int start_game(void);				//오목게임을 시
void draw(void);				//오목판을 그리는 함수
int input(int );				//사용자의 입력을 받는 함수
int check(int ,int , int );			//승패 체크
int menu(void);					//메뉴 출력
void explain(void);				//오목게임 사용법 출력

// 사용자 이름 전적 저장
struct player{						
	char name[20];
	int win , lose;
};

int board[10][10];					//오목판을 표현하는 배열
struct player p[2] = {0};			        //사용자를 나타내는 구조체 선언
int turn = 0;						//턴을 표시하는 변수
int is_server = 0;					//상태를 표시하는 변수
char from_msg[BUFF_SIZE], to_msg[BUFF_SIZE], in_msg[BUFF_SIZE];	  //통신에 필요한 메시지 변수

//통신에 사용될 변수들
WSADATA wsdata;
SOCKET server_sock,client_sock;
SOCKADDR_IN server_addr;

int main(void){
	start();
	init_game();		//게임을 초기화
	while(1){
		if(menu()==1)	//메뉴의 리턴값이 1이 나올때까지 메뉴를 계속 수행
			break;
	}
	
	closesocket(client_sock);	//소켓을 닫
	WSACleanup();

	return 0;
}

//게임방법설명
void explain(void){
	int state;
	char str[30];
	
	FILE * file = fopen("gamerule.txt","rt");
	if(file==NULL){
		printf("file open error!\n");
		return;
	}
	
	while(1){
		fgets(str,sizeof(str),file);
		if(feof(file)!=0)
			break;
		fputs(str,stdout);
	}
	
	state=fclose(file);
	system("pause");
	if(state!=0){
		printf("file close error!\n");
		return;
	}
}
